<%= content_tag :div, 
  id: "note-form",
  class: "bg-white max-w-2xl mx-auto",
  data: {
    note: note.to_json(except: [:created_at, :updated_at]),
    items_attributes: note.items.to_json(except: [:note_id, :created_at, :updated_at])
  } do %>

  <div class="grid grid-cols-12 gap-y-6 gap-x-4 mx-8">
    <div class="col-span-full">
      <div class="space-y-6">
        <div>
          <label for="content" class="block text-sm font-medium text-gray-700">
            <h1>Note content(follow content guidelines below for better data extraction)</h1>
            <li>Place the asteriks* around the start and the end of the note description))</li>
            <li>Place the dollars sign($) around the Total</li>
            <li>Make content edits and observe that the changes in the autogenerated item list meet your expectations</li>
          </label>
          <div class="mt-1">
            <textarea @input="parse" :disabled="note.id" v-model="note.content" id="content" name="content" rows="2" class="block w-full shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm border border-gray-300 rounded-md"></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="col-span-full">
      <div class="space-y-6">
        <div>
          <label for="description" class="block text-sm font-medium text-gray-700">
            Note description
          </label>
          <div class="mt-1">
            <textarea v-model="note.description" id="description" name="description" rows="2" class="block w-full shadow-sm focus:ring-gray-500 focus:border-gray-500 sm:text-sm border border-gray-300 rounded-md"></textarea>
          </div>
        </div>
      </div>
    </div>

    <div class="col-span-8 sm:col-span-4">
      <label for="goal-type" class="block text-sm font-medium text-gray-700">Goal type</label>
      <div class="mt-1">
        <input v-model="note.goal_type" type="text" :disabled="false" name="goal-type" id="goal-type" autocomplete="cc-exp" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
      </div>
    </div>

    <div class="col-span-4 sm:col-span-4">
      <label for="total" class="block text-sm font-medium text-gray-700">Total</label>
      <div class="mt-1">
        <input v-model="note.total" type="text" name="total" id="total" autocomplete="csc" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
      </div>
    </div>

    <div class="col-span-8 sm:col-span-4">
      <label for="goal-type" class="block text-sm font-medium text-gray-700">Generated total</label>
      <div class="mt-1">
        <input :value="generatedTotal" type="text" :disabled="true" name="goal-type" id="goal-type" autocomplete="cc-exp" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
      </div>
    </div>

    <div v-for="(item, index) in note.items_attributes" class="col-span-full grid grid-cols-12 gap-y-0 gap-x-2 -mx-16">
      <div v-if="item._destroy == '1'" class="col-span-full grid grid-cols-12">
        <div class="col-span-full sm:col-span-2">
          <label for="name" class="block text-sm font-medium text-gray-700">Item</label>
          <div class="mt-1">
            <input disabled v-model="item.name" type="text" id="name" name="name" autocomplete="address-level2" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-2">
          <label for="evaluation" class="block text-sm font-medium text-gray-700">Evaluation(-+)</label>
          <div class="mt-1">
            <input disabled v-model="item.evaluation" type="text" id="evaluation" name="evaluation" autocomplete="address-level1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-2">
          <label for="prompting" class="block text-sm font-medium text-gray-700">Prompting</label>
          <div class="mt-1">
            <input disabled v-model="item.prompting" type="text" id="prompting" name="prompting" autocomplete="prompting" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-2">
          <label for="errors_made" class="block text-sm font-medium text-gray-700">Errors</label>
          <div class="mt-1">
            <input disabled v-model="item.errors_made" type="text" id="errors_made" name="errors_made" autocomplete="errors_made" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-4">
          <button @click="retrieveItem(index)" class="text-md font-bold mt-7 ml-2"> To removed UNDO</button>
        </div>
      </div>
      <div v-else class="col-span-full grid grid-cols-12">
        <div class="col-span-full sm:col-span-3">
          <label for="name" class="block text-sm font-medium text-gray-700">Item</label>
          <div class="mt-1">
            <input v-model="item.name" type="text" id="name" name="name" autocomplete="address-level2" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-2">
          <label for="evaluation" class="block text-sm font-medium text-gray-700">Evaluation(-+)</label>
          <div class="mt-1">
            <input v-model="item.evaluation" type="text" id="evaluation" name="evaluation" autocomplete="address-level1" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm tracking-widest">
          </div>
        </div>

        <div class="col-span-full sm:col-span-2">
          <label for="prompting" class="block text-sm font-medium text-gray-700">Prompting</label>
          <div class="mt-1">
            <input v-model="item.prompting" type="text" id="prompting" name="prompting" autocomplete="prompting" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-3">
          <label for="errors_made" class="block text-sm font-medium text-gray-700">Errors</label>
          <div class="mt-1">
            <input v-model="item.errors_made" type="text" id="errors_made" name="errors_made" autocomplete="errors_made" class="block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
          </div>
        </div>

        <div class="col-span-full sm:col-span-1">
          <button @click="removeItem(index)" class="text-lg font-bold mt-7 ml-2">&#10060;</button>
        </div>
      </div>
    </div>
  </div>

  <div class="flex justify-end mt-2">
    <button @click="addItem" type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-900 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">Add item</button>
  </div>

  <div class="flex justify-end mt-2">
    <button @click="cancel" type="button" class="bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
      Cancel
    </button>
    <button @click="saveNote" type="submit" class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-900 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500">
      Save Note
    </button>
  </div>

<% end %>
